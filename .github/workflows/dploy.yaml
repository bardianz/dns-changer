name: Deploy to PythonAnywhere

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2 

      - name: Install Python Dependencies
        run: pip install -r requirements.txt

      - name: Deploy to PythonAnywhere
        env:
            PYTHONANYWHERE_USERNAME: ${{ secrets.PYTHONANYWHERE_USERNAME }}
            PYTHONANYWHERE_API_TOKEN: ${{ secrets.PYTHONANYWHERE_API_TOKEN }}
          run: |
            ssh ${{ secrets.PYTHONANYWHERE_USERNAME }}@${{ secrets.PYTHONANYWHERE_API_TOKEN }}@api.pythonanywhere.com \
              "cd ${{ secrets.PYTHONANYWHERE_APP_NAME

        